<UserControl x:Class="NC_Setup_Assist.Views.ToolAssignmentComparisonView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vm="clr-namespace:NC_Setup_Assist.ViewModels"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance vm:ToolAssignmentComparisonViewModel}"
             d:DesignHeight="600" d:DesignWidth="800">

    <UserControl.Resources>
        <Style x:Key="AssignmentStatusItemStyle" TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="Padding" Value="5"/>
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                    <Setter Property="Background" Value="White"/>
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#EFEFEF"/>
                </Trigger>

                <DataTrigger Binding="{Binding AssignmentStatus}" Value="Unassigned">
                    <Setter Property="Background" Value="#FFFACD"/>
                    <Setter Property="Foreground" Value="Black"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding AssignmentStatus}" Value="Standard">
                    <Setter Property="Background" Value="#D0F0C0"/>
                    <Setter Property="Foreground" Value="#006400"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding AssignmentStatus}" Value="Favorite">
                    <Setter Property="Background" Value="#DCEFFF"/>
                    <Setter Property="Foreground" Value="#005A9C"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding AssignmentStatus}" Value="Manual">
                    <Setter Property="Background" Value="#FFDDDD"/>
                    <Setter Property="Foreground" Value="#A00000"/>
                </DataTrigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E0F0FF"/>
                    <Setter Property="Foreground" Value="Black"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="StandardAssignmentItemStyle" TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="Padding" Value="5"/>
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                    <Setter Property="Background" Value="White"/>
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#EFEFEF"/>
                </Trigger>

                <DataTrigger Binding="{Binding ToolNameBefore}" Value="Unbekannt">
                    <Setter Property="Background" Value="#FFDDDD"/>
                </DataTrigger>

                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E0F0FF"/>
                    <Setter Property="Foreground" Value="Black"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" 
                    Text="Werkzeugzuweisung Vergleich" 
                   FontSize="18" 
                   FontWeight="Bold" 
                   Margin="0,0,0,10"
                   Foreground="#333333"/>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <DockPanel Grid.Column="0" Margin="0,0,5,0">
                <TextBlock DockPanel.Dock="Top" 
                           Text="Standardzuweisungen und bekannte Werkzeuge" 
                           FontWeight="SemiBold" Margin="0,0,0,5"
                           Foreground="#333333"/>
                <ListView ItemsSource="{Binding ComparisonItems}" AlternationCount="2"
                          ItemContainerStyle="{StaticResource StandardAssignmentItemStyle}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Station" DisplayMemberBinding="{Binding Station}" Width="80"/>
                            <GridViewColumn Header="Korrektur" DisplayMemberBinding="{Binding Korrektur}" Width="80"/>
                            <GridViewColumn Header="Standardwerkzeug" DisplayMemberBinding="{Binding ToolNameBefore}" Width="Auto"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </DockPanel>

            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Center" VerticalAlignment="Stretch" Background="#EEEEEE"/>

            <DockPanel Grid.Column="2" Margin="5,0,0,0">
                <TextBlock DockPanel.Dock="Top" 
                           Text="Alle Zugewiesenen Werkzeuge" 
                           FontWeight="SemiBold" Margin="0,0,0,5"
                           Foreground="#333333"/>
                <ListView ItemsSource="{Binding ComparisonItems}" 
                          AlternationCount="2" 
                           ItemContainerStyle="{StaticResource AssignmentStatusItemStyle}"
                          x:Name="ComparisonListView">

                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseDoubleClick">
                            <i:InvokeCommandAction Command="{Binding AssignToolCommand}"
                                                 CommandParameter="{Binding ElementName=ComparisonListView, Path=SelectedItem}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>


                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Station" DisplayMemberBinding="{Binding Station}" Width="60"/>
                            <GridViewColumn Header="Korrektur" DisplayMemberBinding="{Binding Korrektur}" Width="60"/>

                            <GridViewColumn Header="Status" DisplayMemberBinding="{Binding AssignmentStatus}" Width="80"/>

                            <GridViewColumn Header="Werkzeug" DisplayMemberBinding="{Binding ToolNameAfter}" Width="150"/>

                            <GridViewColumn Header="Kategorie/Typ" DisplayMemberBinding="{Binding ToolSubCategory}" Width="150"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </DockPanel>
        </Grid>

        <Button Grid.Row="2" Content="Zuweisung abschliessen &amp; Speichern" 
                Command="{Binding FinishAssignmentCommand}" 
                Style="{StaticResource AccentButton}"
                HorizontalAlignment="Right" 
                Margin="0,10,0,0" 
                Width="250"/>
    </Grid>
</UserControl>